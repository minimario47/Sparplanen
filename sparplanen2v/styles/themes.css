/*
╔══════════════════════════════════════════════════════════════════════════════╗
║                      SPÅRPLANNEN THEME SYSTEM                                ║
║            Professional themes with accessibility support                    ║
╚══════════════════════════════════════════════════════════════════════════════╝

THEME PHILOSOPHY:
- Light mode (default): Professional, easy to read, 7% brightness difference
- Dark mode: Eye-friendly for night shifts, uses borders NOT shadows, 12% brightness difference  
- High contrast: WCAG AAA compliance for visual impairments

ANTHONY HOBDAY'S RULES APPLIED:
1. Near-black (#1a1a1a) and near-white (#fafafa) - NOT pure black/white
2. Container brightness difference: 7% (light), 12% (dark)
3. Dark mode uses borders/highlights instead of shadows
4. Consistent depth technique within each theme
5. Closer elements are lighter (matches real world - light from above)

COLOR TEMPERATURE: Cool (blue-tinted neutrals for tech/railway context)

THEME SWITCHING:
- Add data-theme attribute to html or body element
- Examples: <html data-theme="dark"> or <body data-theme="high-contrast">
- Auto-switching via JavaScript based on system preference or user choice

VERSION: 1.0.0
LAST UPDATED: 2025-01-09
*/

/* ═══════════════════════════════════════════════════════════════════════════
   LIGHT THEME (Default)
   Professional, high contrast, optimized for readability
   7% brightness difference between surface layers
═══════════════════════════════════════════════════════════════════════════ */

:root,
[data-theme="light"] {
    /* Semantic surface colors - from design-system.css */
    --surface-primary: var(--surface-base);              /* #fafafa - near-white base */
    --surface-secondary: var(--surface-elevated);        /* #ffffff - cards, elevated */
    --surface-tertiary: var(--surface-sunken);          /* #f5f5f6 - sunken areas */
    --surface-overlay: var(--surface-overlay);           /* Modal overlays */
    
    /* Text colors - from design-system.css */
    --text-primary: var(--neutral-900);     /* #1a1a1a - near-black, NOT pure black */
    --text-secondary: var(--neutral-600);   /* Body text, labels */
    --text-tertiary: var(--neutral-500);    /* Subtle text */
    --text-inverse: var(--neutral-50);      /* Text on dark backgrounds */
    --text-disabled: var(--neutral-400);    /* Disabled state */
    
    /* Border colors */
    --border-primary: var(--neutral-300);   /* Default borders */
    --border-secondary: var(--neutral-200); /* Subtle borders */
    --border-tertiary: var(--neutral-400);  /* Strong borders */
    --border-focus: var(--primary-500);     /* Focus indicator */
    
    /* Interactive states */
    --interactive-primary: var(--primary-600);
    --interactive-primary-hover: var(--primary-700);
    --interactive-primary-active: var(--primary-800);
    --interactive-secondary: var(--secondary-100);
    --interactive-secondary-hover: var(--secondary-200);
    --interactive-danger: var(--danger-600);
    --interactive-danger-hover: var(--danger-700);
    
    /* Shadows - USE shadows in light mode */
    --shadow-sm-active: var(--shadow-sm);
    --shadow-md-active: var(--shadow-md);
    --shadow-lg-active: var(--shadow-lg);
    --shadow-xl-active: var(--shadow-xl);
    --shadow-2xl-active: var(--shadow-2xl);
    --shadow-glow-active: var(--shadow-glow);
    
    /* No borders for depth in light mode (shadows handle it) */
    --elevation-border: transparent;
}

/* ═══════════════════════════════════════════════════════════════════════════
   DARK THEME
   Eye-friendly for night shifts and low-light environments
   12% brightness difference between surface layers
   Uses borders/highlights INSTEAD of shadows (Anthony Hobday's rule)
═══════════════════════════════════════════════════════════════════════════ */

[data-theme="dark"] {
    /* Surface colors - 12% brightness difference */
    --surface-primary: var(--surface-base-dark);       /* #1a1a1a - near-black base */
    --surface-secondary: var(--surface-elevated-dark); /* #252a31 - elevated (12% lighter) */
    --surface-tertiary: var(--surface-sunken-dark);    /* #0a0a0a - sunken (darker) */
    --surface-overlay: var(--surface-overlay-dark);    /* Dark modal overlay */
    
    /* Text colors - inverted for dark backgrounds */
    --text-primary: var(--text-primary-dark);       /* #fafafa - near-white */
    --text-secondary: var(--text-secondary-dark);   /* #9ca3af */
    --text-tertiary: var(--text-tertiary-dark);     /* #6b7280 */
    --text-inverse: var(--text-inverse-dark);       /* #1a1a1a - dark text for light elements */
    --text-disabled: var(--text-disabled-dark);     /* #4b5563 */
    
    /* Border colors - brighter than surface */
    --border-primary: rgba(255, 255, 255, 0.12);   /* Subtle border */
    --border-secondary: rgba(255, 255, 255, 0.08); /* Very subtle */
    --border-tertiary: rgba(255, 255, 255, 0.18);  /* Strong border */
    --border-focus: var(--primary-400);            /* Focus - lighter in dark mode */
    
    /* Interactive states - adjusted for dark mode */
    --interactive-primary: var(--primary-500);
    --interactive-primary-hover: var(--primary-400);      /* Lighter on hover in dark */
    --interactive-primary-active: var(--primary-300);
    --interactive-secondary: var(--secondary-800);
    --interactive-secondary-hover: var(--secondary-700);
    --interactive-danger: var(--danger-500);
    --interactive-danger-hover: var(--danger-400);
    
    /* NO shadows in dark mode - use borders instead (Anthony Hobday's rule) */
    --shadow-sm-active: none;
    --shadow-md-active: none;
    --shadow-lg-active: none;
    --shadow-xl-active: none;
    --shadow-2xl-active: none;
    --shadow-glow-active: 0 0 0 2px rgba(59, 130, 246, 0.4);  /* Glow is still okay */
    
    /* Use borders for elevation in dark mode */
    --elevation-border: var(--border-light-dark-mode);  /* 1px solid rgba(255, 255, 255, 0.1) */
    
    /* Adjust semantic colors for dark mode visibility */
    --success-color-dark: var(--success-400);
    --warning-color-dark: var(--warning-400);
    --danger-color-dark: var(--danger-400);
}

/* Dark mode: Replace shadows with borders */
[data-theme="dark"] .card,
[data-theme="dark"] .modal-content,
[data-theme="dark"] .dropdown,
[data-theme="dark"] .elevated {
    box-shadow: none !important;  /* Remove all shadows */
    border: var(--elevation-border);  /* Add subtle border instead */
}

/* Dark mode: Top highlight for elevated surfaces (light from above) */
[data-theme="dark"] .elevated::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: var(--highlight-top-dark-mode);  /* rgba(255, 255, 255, 0.05) */
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;
}

/* ═══════════════════════════════════════════════════════════════════════════
   HIGH CONTRAST THEME
   Maximum accessibility for visual impairments
   WCAG AAA compliance (7:1 contrast ratio)
   Bolder borders, higher contrast everywhere
═══════════════════════════════════════════════════════════════════════════ */

[data-theme="high-contrast"] {
    /* Extreme contrast - pure black and white okay here */
    --surface-primary: #000000;      /* Pure black for max contrast */
    --surface-secondary: #1a1a1a;    /* Slightly lighter */
    --surface-tertiary: #0a0a0a;     /* Darker */
    --surface-overlay: rgba(0, 0, 0, 0.95);
    
    /* Text - maximum contrast */
    --text-primary: #ffffff;         /* Pure white for max readability */
    --text-secondary: #e0e0e0;
    --text-tertiary: #c0c0c0;
    --text-inverse: #000000;
    --text-disabled: #888888;
    
    /* Borders - thick and high contrast */
    --border-primary: #ffffff;       /* White borders on black */
    --border-secondary: #cccccc;
    --border-tertiary: #ffffff;
    --border-focus: #00ffff;         /* Bright cyan for focus */
    
    /* Interactive - high visibility colors */
    --interactive-primary: #00ccff;      /* Bright cyan */
    --interactive-primary-hover: #00ffff;
    --interactive-primary-active: #0099cc;
    --interactive-secondary: #333333;
    --interactive-secondary-hover: #555555;
    --interactive-danger: #ff3333;       /* Bright red */
    --interactive-danger-hover: #ff6666;
    
    /* Semantic colors - adjusted for max visibility */
    --success-500: #00ff00;     /* Bright green */
    --warning-500: #ffff00;     /* Bright yellow */
    --danger-500: #ff0000;      /* Bright red */
    --info-500: #00ffff;        /* Bright cyan */
    
    /* No subtle shadows - use strong borders */
    --shadow-sm-active: none;
    --shadow-md-active: none;
    --shadow-lg-active: none;
    --shadow-xl-active: none;
    --shadow-2xl-active: none;
    --shadow-glow-active: 0 0 0 3px #00ffff;
    
    /* Thick borders for high contrast */
    --border-width-DEFAULT: 2px;
    --border-width-thick: 4px;
}

/* High contrast: Force thick borders everywhere */
[data-theme="high-contrast"] * {
    border-width: 2px !important;
}

[data-theme="high-contrast"] .button,
[data-theme="high-contrast"] .card,
[data-theme="high-contrast"] input,
[data-theme="high-contrast"] select {
    border: 2px solid var(--border-primary) !important;
}

[data-theme="high-contrast"] .train-bar {
    border: 3px solid #ffffff !important;
}

/* ═══════════════════════════════════════════════════════════════════════════
   THEME TRANSITIONS
   Smooth transitions when switching themes
═══════════════════════════════════════════════════════════════════════════ */

* {
    transition: 
        background-color var(--transition-DEFAULT) var(--ease-in-out),
        border-color var(--transition-DEFAULT) var(--ease-in-out),
        color var(--transition-DEFAULT) var(--ease-in-out),
        box-shadow var(--transition-DEFAULT) var(--ease-in-out);
}

/* Faster transitions for interactive elements */
button,
a,
input,
select,
.clickable {
    transition: 
        background-color var(--transition-fast) var(--ease-in-out),
        border-color var(--transition-fast) var(--ease-in-out),
        color var(--transition-fast) var(--ease-in-out),
        box-shadow var(--transition-fast) var(--ease-in-out),
        transform var(--transition-fast) var(--ease-in-out);
}

/* Elements that shouldn't transition position/size */
.train-bar,
.current-time-line,
.timeline-current-time,
.menu-dropdown {
    transition: 
        background-color var(--transition-fast) var(--ease-in-out),
        border-color var(--transition-fast) var(--ease-in-out),
        color var(--transition-fast) var(--ease-in-out),
        box-shadow var(--transition-fast) var(--ease-in-out),
        transform var(--transition-DEFAULT) var(--ease-in-out),
        left var(--transition-DEFAULT) var(--ease-in-out),
        top var(--transition-DEFAULT) var(--ease-in-out),
        opacity var(--transition-DEFAULT) var(--ease-in-out);
}

/* ═══════════════════════════════════════════════════════════════════════════
   FOCUS INDICATORS
   WCAG compliant focus states for keyboard navigation
═══════════════════════════════════════════════════════════════════════════ */

*:focus {
    outline: none;
    box-shadow: var(--shadow-glow-active);
}

*:focus:not(:focus-visible) {
    box-shadow: none;
}

*:focus-visible {
    outline: 2px solid var(--border-focus);
    outline-offset: 2px;
    box-shadow: var(--shadow-glow-active);
}

/* High contrast: Extra visible focus */
[data-theme="high-contrast"] *:focus-visible {
    outline: 4px solid #00ffff;
    outline-offset: 3px;
}

/* ═══════════════════════════════════════════════════════════════════════════
   REDUCED MOTION
   Respect user's motion preferences (accessibility)
═══════════════════════════════════════════════════════════════════════════ */

@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

/* ═══════════════════════════════════════════════════════════════════════════
   PRINT STYLES
   Optimize for printing - force light mode
═══════════════════════════════════════════════════════════════════════════ */

@media print {
    *,
    [data-theme="dark"],
    [data-theme="high-contrast"] {
        --surface-primary: #ffffff !important;
        --surface-secondary: #fafafa !important;
        --text-primary: #1a1a1a !important;
        --text-secondary: #475569 !important;
        --border-primary: #e2e8f0 !important;
        
        background: white !important;
        color: black !important;
        box-shadow: none !important;
    }
    
    /* Hide interactive elements in print */
    button,
    .no-print,
    .button,
    nav {
        display: none !important;
    }
}

/* ═══════════════════════════════════════════════════════════════════════════
   AUTO DARK MODE
   Respect system dark mode preference
═══════════════════════════════════════════════════════════════════════════ */

@media (prefers-color-scheme: dark) {
    :root:not([data-theme]) {
        /* Apply dark theme if no explicit theme is set */
        --surface-primary: var(--surface-base-dark);
        --text-primary: var(--text-primary-dark);
        /* ... rest of dark theme variables ... */
        /* This can be expanded or handled via JavaScript */
    }
}

/*
╔══════════════════════════════════════════════════════════════════════════════╗
║                           USAGE EXAMPLES                                     ║
╚══════════════════════════════════════════════════════════════════════════════╝

SWITCH THEME VIA JAVASCRIPT:
document.documentElement.setAttribute('data-theme', 'dark');
document.documentElement.setAttribute('data-theme', 'light');
document.documentElement.setAttribute('data-theme', 'high-contrast');

DETECT SYSTEM PREFERENCE:
const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
if (prefersDark && !localStorage.getItem('theme')) {
    document.documentElement.setAttribute('data-theme', 'dark');
}

USE THEME-AWARE COLORS IN CSS:
.my-element {
    background: var(--surface-primary);
    color: var(--text-primary);
    border: 1px solid var(--border-primary);
    box-shadow: var(--shadow-md-active);  // Auto switches to border in dark mode
}

MANUAL LIGHT/DARK SWITCHING:
[data-theme="dark"] .special-element {
    background: var(--surface-elevated-dark);
}

*/
